---
import { getLangFromUrl, useTranslations } from '../i18n/utils'
import Base from '../layouts/Base.astro'
import { heroContent, supporterTags } from '../data/supporters.ts'
import AudienceHero from '../components/pages/AudienceHero.astro'
import HowItWorks from '../components/pages/HowItWorks.astro'
import Arrow from '@assets/arrow.svg'
import ExtensionLinks from '../components/ExtensionLinks.astro'
import wmExtension from '@assets/wm-extension.png'

const pills = supporterTags
import { HowItWorksSupporters } from '../data/supporters.ts'

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
---

<Base
  title={t('pages.supporters.title')}
  description={t('pages.supporters.description')}
>
  <AudienceHero content={heroContent} pills={pills}>
    <p>
      With Web Monetization, your support fuels a better internet. Support
      publishers directly by streaming micropayments. Pay only for what you
      value and help create a more open, sustainable content ecosystem, one
      second at a time. No tracking, no strings attached.
    </p>
  </AudienceHero>
  <HowItWorks content={HowItWorksSupporters}>
    <p>
      To support web monetized sites, all you need is a compatible wallet and
      the Web Monetization browser extension. Once set up, you can send
      micropayments while you browse, directly, privately, and on your own
      terms.
    </p>
  </HowItWorks>
  <section class='section'>
    <div class='contentWrapper'>
      <div class='content'>
        <h2 class='header'>Web Monetization extension</h2>
        <ol class='text'>
          <li>
            Sign up with a compatible wallet provider to get a wallet address.
          </li>
          <li>Install the extension for Chrome, Firefox, or Edge.</li>
          <li>Connect your wallet in the extension and set your budget.</li>
          <li>Browse web-monetized sites and stream support automatically.</li>
        </ol>
        <div class='image'>
          <img
            src={wmExtension.src}
            alt=''
            width={wmExtension.width}
            height={wmExtension.height}
          />
        </div>
        <a
          href='/supporters/get-started/'
          class='btn secondary flexible'
          data-umami-event='Supporters page link - supporter docs'
        >
          Here's how to get started
          <Arrow class='arrow' />
        </a>
      </div>
    </div>
  </section>
  <section class='section' id="supported-browsers">
    <div class='contentWrapper'>
      <div class='extension'>
        <h2 class='header'>Support content with the web extensions</h2>
        <ExtensionLinks
          includeGitHub
          utm={{ utm_campaign: 'supporters_landing_page' }}
          variant='pages'
        />
        <div class='decorative-line' aria-hidden='true'></div>
      </div>
    </div>
  </section>
</Base>

<style>
  .content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
  }

  .text {
    display: flex;
    flex-direction: column;
    margin: 0;
    padding: var(--padding-lg);
    gap: var(--spacing-lg);
  }

  .image {
    justify-self: center;
    align-self: center;
    display: flex;
    width: 100%;
    max-width: 25rem;
  }

  .image img {
    max-height: 100%;
    max-width: 100%;
    width: 100%;
    height: auto;
  }

  .btn .arrow {
    height: var(--spacing-md);
    width: var(--spacing-md);
    display: inline-block;
    margin: var(--spacing-3xs) 0;
  }

  .btn {
    margin-bottom: var(--spacing-lg);
  }

  .extension {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
  }

  @media screen and (min-width: 768px) {
    .content {
      display: grid;
      column-gap: var(--spacing-3xl);
      grid-template-columns: 1fr 2fr;
      align-items: flex-end;
    }

    .header {
      grid-column: 1 / span 2;
      grid-row: 1;
    }

    .image {
      max-width: 100%;
      grid-column: 1;
      grid-row: 2 / span 2;
      box-shadow:
        0px 55px 55px rgba(0, 0, 0, 0.09),
        0px 15px 30px rgba(0, 0, 0, 0.1);
      animation: pulseBoxShadow 3.5s ease-in-out infinite;
    }

    @keyframes pulseBoxShadow {
      0% {
        box-shadow:
          0px 0px 0px rgba(0, 0, 0, 0),
          0px 0px 0px rgba(0, 0, 0, 0);
      }
      50% {
        box-shadow:
          0px 55px 55px rgba(0, 0, 0, 0.09),
          0px 15px 30px rgba(0, 0, 0, 0.1);
      }
      100% {
        box-shadow:
          0px 0px 0px rgba(0, 0, 0, 0),
          0px 0px 0px rgba(0, 0, 0, 0);
      }
    }

    .text {
      grid-column: 2;
      grid-row: 2;
    }
    .btn {
      grid-column: 2;
      grid-row: 3;
      align-self: flex-start;
      width: max-content;
    }

    .extension {
      border: 1px solid var(--color-purple-100);
      border-radius: var(--moderate-rounding);
      padding: var(--padding-2xl);
    }

    .decorative-line {
      width: 100%;
      height: 4px;
      background-image: url(../assets/bg-lines.svg);
      background-repeat: no-repeat;
      background-size: 100% 4px;
    }
  }

  @media screen and (max-width: 767px) {
    .header {
      font: var(--font-h3);
      width: 100%;
    }
  }
</style>
