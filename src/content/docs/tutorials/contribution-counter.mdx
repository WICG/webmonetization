---
title: Show visitors how much they've contributed
---

import Wallet from '/src/partials/wallet-prereq.mdx'
import Disclaimer from '/src/partials/glitch.mdx'

In this tutorial, you'll create a script that will display a counter on your page. The counter will show your visitors how much they've contributed while on the page during their current browsing session. The counter updates in real time and reflects both time-based payments (X amount per minute) and one-time payments.

### Before you begin

<Wallet />

## User experience

For visitors without Web Monetization, the counter will show "maybe in the future".

For visitors with Web Monetization, the counter will update based on the amount sent during the current browsing session. The counter resets to "maybe in the future" when your visitor:

- Closes the tab, browser window, or browser.
- Clicks a link or performs some other action that redirects the visitor to another page. This includes navigating backward or forward.
- Refreshes the page.

## Create your script

Use the `monetization` event to show a web monetized visitor how much they've sent.

### The code

```html wrap
<head>
  <!-- Set the href to your own wallet address -->
  <link rel="monetization" href="https://wallet.example.com/alice" />

  <script>
    let total = 0

    if (window.MonetizationEvent) {
      const link = document.querySelector('link[rel="monetization"]')
      const contribution = document.getElementById('contribution')

      link.addEventListener('monetization', (event) => {
        const {
          amountSent: { value, currency }
        } = event
        console.log(`Browser sent ${currency} ${value}.`)

        total += Number(value)

        contribution.innerText = new Intl.NumberFormat('en-US', {
          style: 'currency',
          currency
        }).format(total)
      })
    }
  </script>
</head>

<body>
  <p>
    Thanks for contributing
    <span id="contribution">maybe in the future</span>.
  </p>
</body>
```

### How it works

Weâ€™ll bind the `monetization` event if the visitor is web monetized (`window.MonetizationEvent` is defined).

The `monetization` event contains details about the payments that occur. The `amountSent` attribute of the event returns the amount (`value`) and `currency` code of the sent payment. A currency code is a three-letter code, like USD for US Dollar, EUR for the Euro, or GBP for Great Britain Pound. The currency code represents the sender's currency which may be different from the currency you receive (depending on the currency you chose when setting up your wallet account).

```javascript {1,7}
if (window.MonetizationEvent) {
  const link = document.querySelector('link[rel="monetization"]');
  const contribution = document.getElementById('total');

  link.addEventListener('monetization', (event) => {
    const {
      amountSent: { value, currency },
    } = event;
    console.log(`Browser sent ${currency} ${value}.`);
```

The amount in `value` is a string (for rounding reasons), which we add to the total after parsing it to a number.

```javascript
total += Number(value)
```

Lastly, we tell the text on your page to update with the new total. The total should be in a human-readable format, so we use the [`Intl.NumberFormat`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat) API, which does locale-aware currency formatting for us.

```javascript
contribution.innerText = new Intl.NumberFormat('en-US', {
  style: 'currency',
  currency
}).format(total)
```

The formatted version of the amount gets written to the `contribution` span on the page.

```html {4}
<body>
  <p>
    Thanks for contributing
    <span id="contribution">maybe in the future</span>.
  </p>
</body>
```

### Interactive example

This example simulates showing a visitor how much they've sent you based off how long they remain on your web monetized page.

<Disclaimer />

<iframe
  src="/interactive-examples/wm2-count-revenue/index.html"
  title="wm2-count-revenue"
  style="height:100%;width:100%;border:0;min-height:420px"
></iframe>
